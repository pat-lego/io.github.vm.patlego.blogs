<html>
    <head>
        <style>
            .prgrph {
                padding: 0.4rem;
            }
        </style>
    </head>
    <body>
        <div>
            <h2>Introduction</h2>
            <div class="prgrph">
                I have been working on my software during the holiday break, experimenting with various technologies and developing new pieces of functionality. While I was doing that I was continuously thinking about what my next blog needs to be. Then I realized I should do a blog that gives credit to the team of engineers who designed the software that I work with, <i>Apacke Karaf</i>. This blog is going to be the top reasons why I love working with Karaf. 
            </div>
            <h2>Reason #5 - Easy to Debug</h2>
            <div class="prgrph">
                When developers have to fight to debug/step through their own code you know that this not going to be a fun work environment. Let's be honest developers are both the crime scene investigators and the murderers. So when a blood bath appears you need to be able to quickly dig into the <b>Why?</b>. In Karaf one environment variable in the work environment and you can now connect your debugger to the system.

                <div style="display: flex; justify-content: center"><pre><code>ENV EXTRA_JAVA_OPTS -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:5005</code></pre></div>

                All I did was place the above environment variable in my Dockerfile and the system was debuggable on port 5005. Of course you need to create a local debug configuration in your IDE, for me that would be <code>VS Code</code>. A sample configuration file would like the following.
                
                <pre><code>
                    {
                        // Use IntelliSense to learn about possible attributes.
                        // Hover to view descriptions of existing attributes.
                        // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
                        "version": "0.2.0",
                        "configurations": [
                            {
                                "type": "java",
                                "name": "Debug (Attach) - Karaf",
                                "request": "attach",
                                "port": 5005,
                                 "hostName": "localhost"
                            }
                        ]
                    }
                </code></pre>
            </div>
            <h2>Reason #4 - Wrap</h2>
            <div class="prgrph">
                Okay so this one is for the developers who have worked with OSGi, if you have not feel free to skip. The wrap command solves the problem I like to call <b>OSGi Hell</b>, essentially the problem is this. You need to develop a certain microservice so you start building your bundle and then you notice that there is a nice open source library that you can use in your project. So you do what any developer would do (well in my mind anyway) you simply try to deploy it in the /system/console window so that other projects can refer to it. You click the nice big button that says <b>Install</b> and what do you get.... a <b>500</b> error saying your library is not a true bundle. Now you have to pretty much have to embed the dependency into your own project or deploy individual bundles that expose classes that allow developers to interact with the bundle. 
            </div>
            <div class="prgrph">
                In Karaf that does not happen, because when you build your bundles they get installed through a <i>feature</i>, essentially a fancy XML file that knows how to read a maven repo. Let's say you wanted to install your library with a feature you would simply place <code>&lt;bundle&gt;mvn:groupId/artifactId/version&lt;/bundle&gt;</code> and when the feature is read then this artifact would be queried locally and remotely. Well if we are referring to our previous library then this would fail to install since it is a not a true bundle. No problem one slight alteration to the bundle tag <code>&lt;bundle&gt;wrap:mvn:groupId/artifactId/version&lt;/bundle&gt;</code>. Now the library is dynamically converted to an OSGi bundle prior to being installed into the repository allowing others to reference the library at runtime.
            </div>
        </div>
    </body>
</html>